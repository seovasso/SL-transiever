= Спецификация передатчика SL-канала
===========
:Date:      13.10.2017
:Revision:  0.1
:toc:       right
:icons:     font
:source-highlighter: rouge
:table-caption:     Таблица
:listing-caption:   Код
:chapter-label:     Глава
:toc-title:         Оглавление
:version-label:     Версия
:figure-caption:    Рисунок
:imagesdir:         ./../img/

[[main-description]]
== Описание
Данный проект подразумевает реализацию RTL-описания на языке Verilog одноканального передатчика SL-канала.

[[sl-channel-review]]
== Описание SL-канала
SL - канал - последовательный однонаправленный канал обмена данными, разработанный для внутриплатного и межплатного обмена информацией. Обмен данными типа "точка-с-точкой". Канал состоит из двух линий: линии единиц и линии нулей. Пассивный уровень на линиях - единица. В случае передачи данных каждый разряд кодируется отрицательным импульсом на соответствующей линии. Информация передается словами произвольной разрядности младшими разрядами вперед. Предпоследний разряд - четность. Передатчик вычисляет четность таким образом, чтобы количество импульсов на линии единиц с учетом разряда четности было нечетным, а на линии нулей - четным. Приемник контролирует четность индивидуально по каждой линии. Последним импульсом является синхроимпульс, представляющий собой отрицательные импульсы по обоим линиям одновременно. Синхроимпульс означает, что передача закончена. Не допускается перекрытия информационных импульсов во время передачи.

image::SL.png[title="Временная диаграмма SL-канала", align="center"]

Типичная рабочая частота передатчика, спроектированного в синхронном стиле, составляет от 500кГц до 1МГц. Пауза между информационными битами равна длительности отрицательного импульса.

[[top-level-description]]
== Описание верхнего уровня

[[input-signals]]
=== Входные сигналы

.Общие сигналы
* rst_n - асинхронный общий сигнал сброса
* clk - сигнал тактовой частоты
* [31:0] data_a - отправляемое сообщение
* send_imm - начало отправки. После установки в 1 сообщение из data_a запоминается на следующем такте
* wr_config_w - данные для записи в конфигурационный регистр


[[output-signals]]
=== Выходные сигналы

* SL0
* SL1
* [7:0]r_config_w
* send_in_process
* status_changed - на данном выходе появляется импульс при изменении режима работы источника

[[inout-signals]]
=== Двунаправленные сигналы

Отсутствуют.


[[programm-model]]
== Программная модель
Пользователю для работы доступно несколько регистров:
. Конфигурационный
. Данных к отправке


=== Регистр конфигурации

.Назначение разрядов регистра config_r
[cols="16*^", width=99%]
|===
   |0     |1 |2 |3 |4 |5  |6       |7    |8    |9     |10   |11   |12   |13   |14    |15
 6+|BC[6:0]               |IRQM  3+|FQM[9:7]          |Res* |Res* |Res* |Res* |Res*  |Res*
|===

.Описание разрядов регистра config_r
. BC - bit count, количество бит в слове
. IRQM - interrupt request mode, разрешение(IRQM = 1) или запрещение(IRQM = 0) работы прерываний модуля
. FQM - frequency mode, соответствие частот описано в таблице ниже

.Связь значения FQM и частоты работы передатчика
[cols="2*^", width=99%]
|===
|Значение FQM в десятичной системе     | Частота, Мгц
|1                                     |8
|2                                     |4
|3                                     |2
|4                                     |1
|5                                     |0.5
|>5                                    |0.5
|===

=== Регистр состояния

.Назначение разрядов регистра status_r
[cols="16*^", width=99%]
|===
|0     |1     |2    |3    |4    |5    |6    |7    |8    |9    |10   |11   |12   |13   |14   |15
|SIP   |Res*  |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res*
|===

=== Регистр данных к отправке
txdata_r[31:0]
