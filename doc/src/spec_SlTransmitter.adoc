= SlTransmitter
:Date:      31.01.2017
:Revision:  0.2
:toc:       right
:icons:     font
:source-highlighter: rouge
:table-caption:     Таблица
:listing-caption:   Код
:chapter-label:     Глава
:toc-title:         Оглавление
:version-label:     Версия
:figure-caption:    Рисунок
:imagesdir:         ./../img/

[[trans-main-description]]
== Описание
Данный проект подразумевает реализацию RTL-описания на языке Verilog одноканального передатчика SL-канала.

[[trans-top-level-description]]
== Описание верхнего уровня

[[trans-input-signals]]
=== Входные сигналы

* rst_n - асинхронный общий сигнал сброса
* clk - сигнал тактовой частоты
* [31:0] data_a - отправляемое сообщение
* send_imm - начало отправки. После установки в 1 сообщение из data_a запоминается на следующем такте
* [15:0] wr_config_w - данные для записи в регистр конфигурации
* wr_config_en - После установки в 1 в регистр конфигурации записывается значение wr_config_w
* [15:0] wr_status_w - данные для записи в регистр конфигурации
* wr_status_en - После установки в 1 в регистр состояния пишется часть битов wr_status_w (необходимо для сброса прпрываний)

[[trans-output-signals]]
==== Выходные сигналы

* SL0 - сигнал нулей SL канала
* SL1 - сигнал единиц SL канала
* [15:0] r_config_w - значение регистра конфигурации
* [15:0] r_status_w - значение регистра состояния
* [31:0] r_data_w - значение регистра данных
* status_changed - на данном выходе появляется импульс при изменении режима работы источника

[[trans-inout-signals]]
=== Двунаправленные сигналы

Отсутствуют.


[[trans-programm-model]]
== Программная модель
Пользователю для работы доступно несколько регистров:

* Регистр конфигурации (config_r)
* Регистр состояния (status_r)
* Данных к отправке (txdata_r)




=== Регистр конфигурации

.Назначение разрядов регистра конфигурации  (config_r)
[cols="16*^", width=99%]
|===
   |0     |1 |2 |3 |4 |5  |6       |7    |8    |9     |10   |11   |12   |13   |14    |15
 6+|BC[6:0]               |IRQM  3+|FQM[9:7]          |Res* |Res* |Res* |Res* |Res*  |Res*
|===

.Описание разрядов регистра конфигурации (config_r)
. BC - bit count, количество бит в слове
. IRQM - interrupt request mode, разрешение(IRQM = 1) или запрещение(IRQM = 0) работы прерываний модуля
. FQM - frequency mode, соответствие значения FQM и во сколько раз делится частота описано в таблице ниже.

.Связь значения FQM и частоты работы передатчика
[cols="2*^", width=99%]
|===
|Значение FQM в десятичной системе     | Делитель частоты
|1                                     |2
|2                                     |4
|3                                     |8
|4                                     |16
|5                                     |32
|>5                                    |32
|===

=== Регистр состояния

.Назначение разрядов регистра состояния (status_r)
[cols="16*^", width=99%]
|===
|0     |1     |2    |3    |4    |5    |6    |7    |8    |9    |10   |11   |12   |13   |14   |15
|SIP   |Res*  |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res*
|===

=== Регистр данных к отправке
txdata_r[31:0]

.Назначение разрядов регистра данных к отправке (txdata_r)
[cols="1*^", width=99%]
|===
|0 - 31
|Data
|===

Data - данные к отправке.


[[trans-state-machine]]
== Конечный автомат
image::image_SlTransmitter_SM.png[title="Конечный автомат модуля SlTransmitter", align="center"]
