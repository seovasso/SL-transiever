= SlReciever
:Date:      13.10.2017
:Revision:  0.1
:toc:       right
:icons:     font
:source-highlighter: rouge
:table-caption:     Таблица
:listing-caption:   Код
:chapter-label:     Глава
:toc-title:         Оглавление
:version-label:     Версия
:figure-caption:    Рисунок
:imagesdir:         ./../img/

[[rec-main-description]]
== Описание
Данный проект подразумевает реализацию RTL-описания на языке Verilog одноканального приемника SL-канала.

[[rec-top-level-description]]
== Описание верхнего уровня

[[rec-input-signals]]
=== Входные сигналы
.Общие сигналы
* rst_n - асинхронный общий сигнал сброса
* clk - сигнал тактовой частоты
* serial_line_zeroes_a - асинхронный вход линии нулей SL-канала
* serial_line_ones_a - асинхронный вход линии единий SL-канала
* [15:0]wr_config_w - синхронный вход для управления конфигурационным регистром
* wr_enable - синхронный вход, разрешающий запись в конфигурационный регистр

[[rec-output-signals]]
=== Выходные сигналы
* [15:0]status_w
* [31:0]data_w
* [15:0]r_config_w
* data_status_changed - выход, на котором появляется импульс при каждом полезном изменении данных

[[rec-inout-signals]]
=== Двунаправленные сигналы
Отсутствуют.

[[rec-programm-model]]
== Программная модель
Пользователю для работы доступно несколько регистров:
. Конфигурационный
. Состояния
. Полученных данных

=== Регистр конфигурации

.Назначение разрядов регистра config_r
[cols="16*^", width=99%]
|===
|0     |1 |2 |3 |4 |5 |6    |7    |8    |9    |10   |11   |12   |13   |14    |15
|PCE 6+|BC[6:0]             |MODE |IRQM |Res* |Res* |Res* |Res* |Res* |Res*  |Res*
|===

.Описание разрядов регистра config_r
. PCE - parity check enable, разрешение контроля четности(PCE = 1), или запрещение(PCE = 0)
. BC - bit count, количество бит в слове
. MODE - выбор режима работы модуля в качестве применика(MODE = 0), или передатчика(MODE = 1)
. IRQM - interrupt request mode, разрешение(IRQM = 1) или запрещение(IRQM = 0) работы прерываний модуля

=== Регистр состояния

.Назначение разрядов регистра status_r
[cols="16*^", width=99%]
|===
|0     |1   |2    |3   |4   |5   |6    |7    |8    |9    |10   |11   |12   |13   |14   |15
|WLC   |WRP |Res* |WRF |PEF |LEF |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res* |Res*
|===

.Описание разрядов регистра status_r
. WLC - word length check, результат проверки длины полученного слова на равенство значению BC регистра config_r, WLC = 1, если значения не равны
. WRP - word receiving process, флаг идущего процесса приема слова по SL-каналу
. Res* - Зарезервированно
. WRF - word received flag, флаг успешно завершенного приема слова
. PEF - parity error flag, флаг наличия(PEF = 1) ошибки четности принятого слова
. LEF - level error on line flag, флаг наличия ошибки уровня напряжения на линии SL-канала

=== Регистр полученных данных
buffered_data_r[31:0]

[[rec-state-machine]]
== Конечный автомат

image::image_SlReciever_SM.png[title="Конечный автомат модуля SlReciever", align="center"]
